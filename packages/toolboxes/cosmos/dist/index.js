import{toBech32 as Zn}from"@cosmjs/encoding";import{base64 as hn,bech32 as An}from"@scure/base";import{fromByteArray as kn,toByteArray as wn}from"base64-js";function Q(x){return hn.encode(Uint8Array.from(An.fromWords(An.decode(x).words)))}function Z(x,T="thor"){return Zn(T,hn.decode(x))}function qf(x){return kn(x)}function Xf(x){if(!x.match(/^[a-zA-Z0-9+/]*={0,2}$/))throw new Error("Invalid base64 string format");return wn(x)}import{AssetValue as gn,Chain as E,ChainToChainId as an,RPCUrl as Cn}from"@swapkit/helpers";import{GasPrice as tn,SigningStargateClient as Sn,StargateClient as pn}from"@cosmjs/stargate";import{AssetValue as a,Chain as $n,ChainId as k,FeeOption as on,RPCUrl as L,defaultRequestHeaders as Mn}from"@swapkit/helpers";var W="FACTORY/KUJIRA1QK00H5ATUTPSV900X202PXX42NPJR9THG58DNQPA72F2P7M2LUASE444A7/UUSK",r="FACTORY/KUJIRA1YGFXN0ER40KLCNCK8THLTUPRDXLCK6WVNPKF2K/UYUM",On={amount:[{denom:"uatom",amount:"500"}],gas:"200000"},w=(x,T=!1)=>{if(T)return x.toLowerCase();switch(x){case"uUSK":return W;case"uYUM":return r;default:return x}},G=(x)=>{return pn.connect({url:x,headers:Mn})},t=(x,T,u={})=>{const n=typeof u==="string"?u:"0.0003uatom",y=typeof u==="string"?{}:u;return Sn.connectWithSigner({url:x,headers:Mn},T,{gasPrice:tn.fromString(n),...y})},Fn=(x,T)=>{return Sn.offline(x,T)},p=(x,T)=>{switch(x){case k.Cosmos:return L.Cosmos;case k.Kujira:return L.Kujira;case k.THORChain:return T?L.THORChainStagenet:L.THORChain;case k.Maya:return T?L.MayaStagenet:L.Maya;default:return L.Cosmos}},Qf=async({from:x,toolbox:T,asset:u,feeOptionKey:n=on.Fast})=>{const y=typeof u==="string"?await a.from({asyncTokenLookup:!0,asset:u}):u,f=await T.getBalance(x),l=f.find(({symbol:O,chain:F})=>u?O===y?.symbol:O===a.from({chain:F}).symbol),h=await T.getFees();if(!l)return a.from({chain:y?.chain||f[0]?.chain||$n.Cosmos});return l.sub(h[n])};import{Registry as dn}from"@cosmjs/proto-signing";import{AminoTypes as jn,defaultRegistryTypes as mn}from"@cosmjs/stargate";import{Chain as Bn}from"@swapkit/helpers";import C from"protobufjs/minimal.js";var M=C.Reader,K=C.Writer,S=C.util,A=C.roots.default||(C.roots.default={});A.common=(()=>{const x={};return x.Asset=(()=>{function T(u){if(u){for(let n=Object.keys(u),y=0;y<n.length;++y)if(u[n[y]]!=null)this[n[y]]=u[n[y]]}}return T.prototype.chain="",T.prototype.symbol="",T.prototype.ticker="",T.prototype.synth=!1,T.create=function u(n){return new T(n)},T.encode=function u(n,y){if(!y)y=K.create();if(n.chain!=null&&Object.hasOwnProperty.call(n,"chain"))y.uint32(10).string(n.chain);if(n.symbol!=null&&Object.hasOwnProperty.call(n,"symbol"))y.uint32(18).string(n.symbol);if(n.ticker!=null&&Object.hasOwnProperty.call(n,"ticker"))y.uint32(26).string(n.ticker);if(n.synth!=null&&Object.hasOwnProperty.call(n,"synth"))y.uint32(32).bool(n.synth);return y},T.encodeDelimited=function u(n,y){return this.encode(n,y).ldelim()},T.decode=function u(n,y){if(!(n instanceof M))n=M.create(n);const f=y===void 0?n.len:n.pos+y,l=new A.common.Asset;while(n.pos<f){const h=n.uint32();switch(h>>>3){case 1:l.chain=n.string();break;case 2:l.symbol=n.string();break;case 3:l.ticker=n.string();break;case 4:l.synth=n.bool();break;default:n.skipType(h&7);break}}return l},T.decodeDelimited=function u(n){if(!(n instanceof M))n=new M(n);return this.decode(n,n.uint32())},T.verify=function u(n){if(typeof n!=="object"||n===null)return"object expected";if(n.chain!=null&&n.hasOwnProperty("chain")){if(!S.isString(n.chain))return"chain: string expected"}if(n.symbol!=null&&n.hasOwnProperty("symbol")){if(!S.isString(n.symbol))return"symbol: string expected"}if(n.ticker!=null&&n.hasOwnProperty("ticker")){if(!S.isString(n.ticker))return"ticker: string expected"}if(n.synth!=null&&n.hasOwnProperty("synth")){if(typeof n.synth!=="boolean")return"synth: boolean expected"}return null},T.fromObject=function u(n){if(n instanceof A.common.Asset)return n;const y=new A.common.Asset;if(n.chain!=null)y.chain=String(n.chain);if(n.symbol!=null)y.symbol=String(n.symbol);if(n.ticker!=null)y.ticker=String(n.ticker);if(n.synth!=null)y.synth=Boolean(n.synth);return y},T.toObject=function u(n,y){if(!y)y={};const f={};if(y.defaults)f.chain="",f.symbol="",f.ticker="",f.synth=!1;if(n.chain!=null&&n.hasOwnProperty("chain"))f.chain=n.chain;if(n.symbol!=null&&n.hasOwnProperty("symbol"))f.symbol=n.symbol;if(n.ticker!=null&&n.hasOwnProperty("ticker"))f.ticker=n.ticker;if(n.synth!=null&&n.hasOwnProperty("synth"))f.synth=n.synth;return f},T.prototype.toJSON=function u(){return this.constructor.toObject(this,C.util.toJSONOptions)},T})(),x.Coin=(()=>{function T(u){if(u){for(let n=Object.keys(u),y=0;y<n.length;++y)if(u[n[y]]!=null)this[n[y]]=u[n[y]]}}return T.prototype.asset=null,T.prototype.amount="",T.prototype.decimals=S.Long?S.Long.fromBits(0,0,!1):0,T.create=function u(n){return new T(n)},T.encode=function u(n,y){if(!y)y=K.create();if(n.asset!=null&&Object.hasOwnProperty.call(n,"asset"))A.common.Asset.encode(n.asset,y.uint32(10).fork()).ldelim();if(n.amount!=null&&Object.hasOwnProperty.call(n,"amount"))y.uint32(18).string(n.amount);if(n.decimals!=null&&Object.hasOwnProperty.call(n,"decimals"))y.uint32(24).int64(n.decimals);return y},T.encodeDelimited=function u(n,y){return this.encode(n,y).ldelim()},T.decode=function u(n,y){if(!(n instanceof M))n=M.create(n);const f=y===void 0?n.len:n.pos+y,l=new A.common.Coin;while(n.pos<f){const h=n.uint32();switch(h>>>3){case 1:l.asset=A.common.Asset.decode(n,n.uint32());break;case 2:l.amount=n.string();break;case 3:l.decimals=n.int64();break;default:n.skipType(h&7);break}}return l},T.decodeDelimited=function u(n){if(!(n instanceof M))n=new M(n);return this.decode(n,n.uint32())},T.verify=function u(n){if(typeof n!=="object"||n===null)return"object expected";if(n.asset!=null&&n.hasOwnProperty("asset")){const y=A.common.Asset.verify(n.asset);if(y)return"asset."+y}if(n.amount!=null&&n.hasOwnProperty("amount")){if(!S.isString(n.amount))return"amount: string expected"}if(n.decimals!=null&&n.hasOwnProperty("decimals")){if(!S.isInteger(n.decimals)&&!(n.decimals&&S.isInteger(n.decimals.low)&&S.isInteger(n.decimals.high)))return"decimals: integer|Long expected"}return null},T.fromObject=function u(n){if(n instanceof A.common.Coin)return n;const y=new A.common.Coin;if(n.asset!=null){if(typeof n.asset!=="object")throw TypeError(".common.Coin.asset: object expected");y.asset=A.common.Asset.fromObject(n.asset)}if(n.amount!=null)y.amount=String(n.amount);if(n.decimals!=null){if(S.Long)(y.decimals=S.Long.fromValue(n.decimals)).unsigned=!1;else if(typeof n.decimals==="string")y.decimals=parseInt(n.decimals,10);else if(typeof n.decimals==="number")y.decimals=n.decimals;else if(typeof n.decimals==="object")y.decimals=new S.LongBits(n.decimals.low>>>0,n.decimals.high>>>0).toNumber()}return y},T.toObject=function u(n,y){if(!y)y={};const f={};if(y.defaults)if(f.asset=null,f.amount="",S.Long){const l=new S.Long(0,0,!1);f.decimals=y.longs===String?l.toString():y.longs===Number?l.toNumber():l}else f.decimals=y.longs===String?"0":0;if(n.asset!=null&&n.hasOwnProperty("asset"))f.asset=A.common.Asset.toObject(n.asset,y);if(n.amount!=null&&n.hasOwnProperty("amount"))f.amount=n.amount;if(n.decimals!=null&&n.hasOwnProperty("decimals"))if(typeof n.decimals==="number")f.decimals=y.longs===String?String(n.decimals):n.decimals;else f.decimals=y.longs===String?S.Long.prototype.toString.call(n.decimals):y.longs===Number?new S.LongBits(n.decimals.low>>>0,n.decimals.high>>>0).toNumber():n.decimals;return f},T.prototype.toJSON=function u(){return this.constructor.toObject(this,C.util.toJSONOptions)},T})(),x.PubKeySet=(()=>{function T(u){if(u){for(let n=Object.keys(u),y=0;y<n.length;++y)if(u[n[y]]!=null)this[n[y]]=u[n[y]]}}return T.prototype.secp256k1="",T.prototype.ed25519="",T.create=function u(n){return new T(n)},T.encode=function u(n,y){if(!y)y=K.create();if(n.secp256k1!=null&&Object.hasOwnProperty.call(n,"secp256k1"))y.uint32(10).string(n.secp256k1);if(n.ed25519!=null&&Object.hasOwnProperty.call(n,"ed25519"))y.uint32(18).string(n.ed25519);return y},T.encodeDelimited=function u(n,y){return this.encode(n,y).ldelim()},T.decode=function u(n,y){if(!(n instanceof M))n=M.create(n);const f=y===void 0?n.len:n.pos+y,l=new A.common.PubKeySet;while(n.pos<f){const h=n.uint32();switch(h>>>3){case 1:l.secp256k1=n.string();break;case 2:l.ed25519=n.string();break;default:n.skipType(h&7);break}}return l},T.decodeDelimited=function u(n){if(!(n instanceof M))n=new M(n);return this.decode(n,n.uint32())},T.verify=function u(n){if(typeof n!=="object"||n===null)return"object expected";if(n.secp256k1!=null&&n.hasOwnProperty("secp256k1")){if(!S.isString(n.secp256k1))return"secp256k1: string expected"}if(n.ed25519!=null&&n.hasOwnProperty("ed25519")){if(!S.isString(n.ed25519))return"ed25519: string expected"}return null},T.fromObject=function u(n){if(n instanceof A.common.PubKeySet)return n;const y=new A.common.PubKeySet;if(n.secp256k1!=null)y.secp256k1=String(n.secp256k1);if(n.ed25519!=null)y.ed25519=String(n.ed25519);return y},T.toObject=function u(n,y){if(!y)y={};const f={};if(y.defaults)f.secp256k1="",f.ed25519="";if(n.secp256k1!=null&&n.hasOwnProperty("secp256k1"))f.secp256k1=n.secp256k1;if(n.ed25519!=null&&n.hasOwnProperty("ed25519"))f.ed25519=n.ed25519;return f},T.prototype.toJSON=function u(){return this.constructor.toObject(this,C.util.toJSONOptions)},T})(),x.Tx=(()=>{function T(u){if(this.coins=[],this.gas=[],u){for(let n=Object.keys(u),y=0;y<n.length;++y)if(u[n[y]]!=null)this[n[y]]=u[n[y]]}}return T.prototype.id="",T.prototype.chain="",T.prototype.fromAddress="",T.prototype.toAddress="",T.prototype.coins=S.emptyArray,T.prototype.gas=S.emptyArray,T.prototype.memo="",T.create=function u(n){return new T(n)},T.encode=function u(n,y){if(!y)y=K.create();if(n.id!=null&&Object.hasOwnProperty.call(n,"id"))y.uint32(10).string(n.id);if(n.chain!=null&&Object.hasOwnProperty.call(n,"chain"))y.uint32(18).string(n.chain);if(n.fromAddress!=null&&Object.hasOwnProperty.call(n,"fromAddress"))y.uint32(26).string(n.fromAddress);if(n.toAddress!=null&&Object.hasOwnProperty.call(n,"toAddress"))y.uint32(34).string(n.toAddress);if(n.coins?.length)for(let f=0;f<n.coins.length;++f)A.common.Coin.encode(n.coins[f],y.uint32(42).fork()).ldelim();if(n.gas?.length)for(let f=0;f<n.gas.length;++f)A.common.Coin.encode(n.gas[f],y.uint32(50).fork()).ldelim();if(n.memo!=null&&Object.hasOwnProperty.call(n,"memo"))y.uint32(58).string(n.memo);return y},T.encodeDelimited=function u(n,y){return this.encode(n,y).ldelim()},T.decode=function u(n,y){if(!(n instanceof M))n=M.create(n);const f=y===void 0?n.len:n.pos+y,l=new A.common.Tx;while(n.pos<f){const h=n.uint32();switch(h>>>3){case 1:l.id=n.string();break;case 2:l.chain=n.string();break;case 3:l.fromAddress=n.string();break;case 4:l.toAddress=n.string();break;case 5:if(!l.coins?.length)l.coins=[];l.coins.push(A.common.Coin.decode(n,n.uint32()));break;case 6:if(!l.gas?.length)l.gas=[];l.gas.push(A.common.Coin.decode(n,n.uint32()));break;case 7:l.memo=n.string();break;default:n.skipType(h&7);break}}return l},T.decodeDelimited=function u(n){if(!(n instanceof M))n=new M(n);return this.decode(n,n.uint32())},T.verify=function u(n){if(typeof n!=="object"||n===null)return"object expected";if(n.id!=null&&n.hasOwnProperty("id")){if(!S.isString(n.id))return"id: string expected"}if(n.chain!=null&&n.hasOwnProperty("chain")){if(!S.isString(n.chain))return"chain: string expected"}if(n.fromAddress!=null&&n.hasOwnProperty("fromAddress")){if(!S.isString(n.fromAddress))return"fromAddress: string expected"}if(n.toAddress!=null&&n.hasOwnProperty("toAddress")){if(!S.isString(n.toAddress))return"toAddress: string expected"}if(n.coins!=null&&n.hasOwnProperty("coins")){if(!Array.isArray(n.coins))return"coins: array expected";for(let y=0;y<n.coins.length;++y){const f=A.common.Coin.verify(n.coins[y]);if(f)return"coins."+f}}if(n.gas!=null&&n.hasOwnProperty("gas")){if(!Array.isArray(n.gas))return"gas: array expected";for(let y=0;y<n.gas.length;++y){const f=A.common.Coin.verify(n.gas[y]);if(f)return"gas."+f}}if(n.memo!=null&&n.hasOwnProperty("memo")){if(!S.isString(n.memo))return"memo: string expected"}return null},T.fromObject=function u(n){if(n instanceof A.common.Tx)return n;const y=new A.common.Tx;if(n.id!=null)y.id=String(n.id);if(n.chain!=null)y.chain=String(n.chain);if(n.fromAddress!=null)y.fromAddress=String(n.fromAddress);if(n.toAddress!=null)y.toAddress=String(n.toAddress);if(n.coins){if(!Array.isArray(n.coins))throw TypeError(".common.Tx.coins: array expected");y.coins=[];for(let f=0;f<n.coins.length;++f){if(typeof n.coins[f]!=="object")throw TypeError(".common.Tx.coins: object expected");y.coins[f]=A.common.Coin.fromObject(n.coins[f])}}if(n.gas){if(!Array.isArray(n.gas))throw TypeError(".common.Tx.gas: array expected");y.gas=[];for(let f=0;f<n.gas.length;++f){if(typeof n.gas[f]!=="object")throw TypeError(".common.Tx.gas: object expected");y.gas[f]=A.common.Coin.fromObject(n.gas[f])}}if(n.memo!=null)y.memo=String(n.memo);return y},T.toObject=function u(n,y){if(!y)y={};const f={};if(y.arrays||y.defaults)f.coins=[],f.gas=[];if(y.defaults)f.id="",f.chain="",f.fromAddress="",f.toAddress="",f.memo="";if(n.id!=null&&n.hasOwnProperty("id"))f.id=n.id;if(n.chain!=null&&n.hasOwnProperty("chain"))f.chain=n.chain;if(n.fromAddress!=null&&n.hasOwnProperty("fromAddress"))f.fromAddress=n.fromAddress;if(n.toAddress!=null&&n.hasOwnProperty("toAddress"))f.toAddress=n.toAddress;if(n.coins?.length){f.coins=[];for(let l=0;l<n.coins.length;++l)f.coins[l]=A.common.Coin.toObject(n.coins[l],y)}if(n.gas?.length){f.gas=[];for(let l=0;l<n.gas.length;++l)f.gas[l]=A.common.Coin.toObject(n.gas[l],y)}if(n.memo!=null&&n.hasOwnProperty("memo"))f.memo=n.memo;return f},T.prototype.toJSON=function u(){return this.constructor.toObject(this,C.util.toJSONOptions)},T})(),x.Fee=(()=>{function T(u){if(this.coins=[],u){for(let n=Object.keys(u),y=0;y<n.length;++y)if(u[n[y]]!=null)this[n[y]]=u[n[y]]}}return T.prototype.coins=S.emptyArray,T.prototype.poolDeduct="",T.create=function u(n){return new T(n)},T.encode=function u(n,y){if(!y)y=K.create();if(n.coins?.length)for(let f=0;f<n.coins.length;++f)A.common.Coin.encode(n.coins[f],y.uint32(10).fork()).ldelim();if(n.poolDeduct!=null&&Object.hasOwnProperty.call(n,"poolDeduct"))y.uint32(18).string(n.poolDeduct);return y},T.encodeDelimited=function u(n,y){return this.encode(n,y).ldelim()},T.decode=function u(n,y){if(!(n instanceof M))n=M.create(n);const f=y===void 0?n.len:n.pos+y,l=new A.common.Fee;while(n.pos<f){const h=n.uint32();switch(h>>>3){case 1:if(!l.coins?.length)l.coins=[];l.coins.push(A.common.Coin.decode(n,n.uint32()));break;case 2:l.poolDeduct=n.string();break;default:n.skipType(h&7);break}}return l},T.decodeDelimited=function u(n){if(!(n instanceof M))n=new M(n);return this.decode(n,n.uint32())},T.verify=function u(n){if(typeof n!=="object"||n===null)return"object expected";if(n.coins!=null&&n.hasOwnProperty("coins")){if(!Array.isArray(n.coins))return"coins: array expected";for(let y=0;y<n.coins.length;++y){const f=A.common.Coin.verify(n.coins[y]);if(f)return"coins."+f}}if(n.poolDeduct!=null&&n.hasOwnProperty("poolDeduct")){if(!S.isString(n.poolDeduct))return"poolDeduct: string expected"}return null},T.fromObject=function u(n){if(n instanceof A.common.Fee)return n;const y=new A.common.Fee;if(n.coins){if(!Array.isArray(n.coins))throw TypeError(".common.Fee.coins: array expected");y.coins=[];for(let f=0;f<n.coins.length;++f){if(typeof n.coins[f]!=="object")throw TypeError(".common.Fee.coins: object expected");y.coins[f]=A.common.Coin.fromObject(n.coins[f])}}if(n.poolDeduct!=null)y.poolDeduct=String(n.poolDeduct);return y},T.toObject=function u(n,y){if(!y)y={};const f={};if(y.arrays||y.defaults)f.coins=[];if(y.defaults)f.poolDeduct="";if(n.coins?.length){f.coins=[];for(let l=0;l<n.coins.length;++l)f.coins[l]=A.common.Coin.toObject(n.coins[l],y)}if(n.poolDeduct!=null&&n.hasOwnProperty("poolDeduct"))f.poolDeduct=n.poolDeduct;return f},T.prototype.toJSON=function u(){return this.constructor.toObject(this,C.util.toJSONOptions)},T})(),x.ProtoUint=(()=>{function T(u){if(u){for(let n=Object.keys(u),y=0;y<n.length;++y)if(u[n[y]]!=null)this[n[y]]=u[n[y]]}}return T.prototype.value="",T.create=function u(n){return new T(n)},T.encode=function u(n,y){if(!y)y=K.create();if(n.value!=null&&Object.hasOwnProperty.call(n,"value"))y.uint32(10).string(n.value);return y},T.encodeDelimited=function u(n,y){return this.encode(n,y).ldelim()},T.decode=function u(n,y){if(!(n instanceof M))n=M.create(n);const f=y===void 0?n.len:n.pos+y,l=new A.common.ProtoUint;while(n.pos<f){const h=n.uint32();switch(h>>>3){case 1:l.value=n.string();break;default:n.skipType(h&7);break}}return l},T.decodeDelimited=function u(n){if(!(n instanceof M))n=new M(n);return this.decode(n,n.uint32())},T.verify=function u(n){if(typeof n!=="object"||n===null)return"object expected";if(n.value!=null&&n.hasOwnProperty("value")){if(!S.isString(n.value))return"value: string expected"}return null},T.fromObject=function u(n){if(n instanceof A.common.ProtoUint)return n;const y=new A.common.ProtoUint;if(n.value!=null)y.value=String(n.value);return y},T.toObject=function u(n,y){if(!y)y={};const f={};if(y.defaults)f.value="";if(n.value!=null&&n.hasOwnProperty("value"))f.value=n.value;return f},T.prototype.toJSON=function u(){return this.constructor.toObject(this,C.util.toJSONOptions)},T})(),x})();A.types=(()=>{const x={};return x.MsgDeposit=(()=>{function T(u){if(this.coins=[],u){for(let n=Object.keys(u),y=0;y<n.length;++y)if(u[n[y]]!=null)this[n[y]]=u[n[y]]}}return T.prototype.coins=S.emptyArray,T.prototype.memo="",T.prototype.signer=S.newBuffer([]),T.create=function u(n){return new T(n)},T.encode=function u(n,y){if(!y)y=K.create();if(n.coins?.length)for(let f=0;f<n.coins.length;++f)A.common.Coin.encode(n.coins[f],y.uint32(10).fork()).ldelim();if(n.memo!=null&&Object.hasOwnProperty.call(n,"memo"))y.uint32(18).string(n.memo);if(n.signer!=null&&Object.hasOwnProperty.call(n,"signer"))y.uint32(26).bytes(n.signer);return y},T.encodeDelimited=function u(n,y){return this.encode(n,y).ldelim()},T.decode=function u(n,y){if(!(n instanceof M))n=M.create(n);const f=y===void 0?n.len:n.pos+y,l=new A.types.MsgDeposit;while(n.pos<f){const h=n.uint32();switch(h>>>3){case 1:if(!l.coins?.length)l.coins=[];l.coins.push(A.common.Coin.decode(n,n.uint32()));break;case 2:l.memo=n.string();break;case 3:l.signer=n.bytes();break;default:n.skipType(h&7);break}}return l},T.decodeDelimited=function u(n){if(!(n instanceof M))n=new M(n);return this.decode(n,n.uint32())},T.verify=function u(n){if(typeof n!=="object"||n===null)return"object expected";if(n.coins!=null&&n.hasOwnProperty("coins")){if(!Array.isArray(n.coins))return"coins: array expected";for(let y=0;y<n.coins.length;++y){const f=A.common.Coin.verify(n.coins[y]);if(f)return"coins."+f}}if(n.memo!=null&&n.hasOwnProperty("memo")){if(!S.isString(n.memo))return"memo: string expected"}if(n.signer!=null&&n.hasOwnProperty("signer")){if(!(n.signer&&typeof n.signer.length==="number"||S.isString(n.signer)))return"signer: buffer expected"}return null},T.fromObject=function u(n){if(n instanceof A.types.MsgDeposit)return n;const y=new A.types.MsgDeposit;if(n.coins){if(!Array.isArray(n.coins))throw TypeError(".types.MsgDeposit.coins: array expected");y.coins=[];for(let f=0;f<n.coins.length;++f){if(typeof n.coins[f]!=="object")throw TypeError(".types.MsgDeposit.coins: object expected");y.coins[f]=A.common.Coin.fromObject(n.coins[f])}}if(n.memo!=null)y.memo=String(n.memo);if(n.signer!=null){if(typeof n.signer==="string")S.base64.decode(n.signer,y.signer=S.newBuffer(S.base64.length(n.signer)),0);else if(n.signer.length)y.signer=n.signer}return y},T.toObject=function u(n,y){if(!y)y={};const f={};if(y.arrays||y.defaults)f.coins=[];if(y.defaults){if(f.memo="",y.bytes===String)f.signer="";else if(f.signer=[],y.bytes!==Array)f.signer=S.newBuffer(f.signer)}if(n.coins?.length){f.coins=[];for(let l=0;l<n.coins.length;++l)f.coins[l]=A.common.Coin.toObject(n.coins[l],y)}if(n.memo!=null&&n.hasOwnProperty("memo"))f.memo=n.memo;if(n.signer!=null&&n.hasOwnProperty("signer"))f.signer=y.bytes===String?S.base64.encode(n.signer,0,n.signer.length):y.bytes===Array?Array.prototype.slice.call(n.signer):n.signer;return f},T.prototype.toJSON=function u(){return this.constructor.toObject(this,C.util.toJSONOptions)},T})(),x.MsgSend=(()=>{function T(u){if(this.amount=[],u){for(let n=Object.keys(u),y=0;y<n.length;++y)if(u[n[y]]!=null)this[n[y]]=u[n[y]]}}return T.prototype.fromAddress=S.newBuffer([]),T.prototype.toAddress=S.newBuffer([]),T.prototype.amount=S.emptyArray,T.create=function u(n){return new T(n)},T.encode=function u(n,y){if(!y)y=K.create();if(n.fromAddress!=null&&Object.hasOwnProperty.call(n,"fromAddress"))y.uint32(10).bytes(n.fromAddress);if(n.toAddress!=null&&Object.hasOwnProperty.call(n,"toAddress"))y.uint32(18).bytes(n.toAddress);if(n.amount?.length)for(let f=0;f<n.amount.length;++f)A.cosmos.base.v1beta1.Coin.encode(n.amount[f],y.uint32(26).fork()).ldelim();return y},T.encodeDelimited=function u(n,y){return this.encode(n,y).ldelim()},T.decode=function u(n,y){if(!(n instanceof M))n=M.create(n);const f=y===void 0?n.len:n.pos+y,l=new A.types.MsgSend;while(n.pos<f){const h=n.uint32();switch(h>>>3){case 1:l.fromAddress=n.bytes();break;case 2:l.toAddress=n.bytes();break;case 3:if(!l.amount?.length)l.amount=[];l.amount.push(A.cosmos.base.v1beta1.Coin.decode(n,n.uint32()));break;default:n.skipType(h&7);break}}return l},T.decodeDelimited=function u(n){if(!(n instanceof M))n=new M(n);return this.decode(n,n.uint32())},T.verify=function u(n){if(typeof n!=="object"||n===null)return"object expected";if(n.fromAddress!=null&&n.hasOwnProperty("fromAddress")){if(!(n.fromAddress&&typeof n.fromAddress.length==="number"||S.isString(n.fromAddress)))return"fromAddress: buffer expected"}if(n.toAddress!=null&&n.hasOwnProperty("toAddress")){if(!(n.toAddress&&typeof n.toAddress.length==="number"||S.isString(n.toAddress)))return"toAddress: buffer expected"}if(n.amount!=null&&n.hasOwnProperty("amount")){if(!Array.isArray(n.amount))return"amount: array expected";for(let y=0;y<n.amount.length;++y){const f=A.cosmos.base.v1beta1.Coin.verify(n.amount[y]);if(f)return"amount."+f}}return null},T.fromObject=function u(n){if(n instanceof A.types.MsgSend)return n;const y=new A.types.MsgSend;if(n.fromAddress!=null){if(typeof n.fromAddress==="string")S.base64.decode(n.fromAddress,y.fromAddress=S.newBuffer(S.base64.length(n.fromAddress)),0);else if(n.fromAddress.length)y.fromAddress=n.fromAddress}if(n.toAddress!=null){if(typeof n.toAddress==="string")S.base64.decode(n.toAddress,y.toAddress=S.newBuffer(S.base64.length(n.toAddress)),0);else if(n.toAddress.length)y.toAddress=n.toAddress}if(n.amount){if(!Array.isArray(n.amount))throw TypeError(".types.MsgSend.amount: array expected");y.amount=[];for(let f=0;f<n.amount.length;++f){if(typeof n.amount[f]!=="object")throw TypeError(".types.MsgSend.amount: object expected");y.amount[f]=A.cosmos.base.v1beta1.Coin.fromObject(n.amount[f])}}return y},T.toObject=function u(n,y){if(!y)y={};const f={};if(y.arrays||y.defaults)f.amount=[];if(y.defaults){if(y.bytes===String)f.fromAddress="";else if(f.fromAddress=[],y.bytes!==Array)f.fromAddress=S.newBuffer(f.fromAddress);if(y.bytes===String)f.toAddress="";else if(f.toAddress=[],y.bytes!==Array)f.toAddress=S.newBuffer(f.toAddress)}if(n.fromAddress!=null&&n.hasOwnProperty("fromAddress"))f.fromAddress=y.bytes===String?S.base64.encode(n.fromAddress,0,n.fromAddress.length):y.bytes===Array?Array.prototype.slice.call(n.fromAddress):n.fromAddress;if(n.toAddress!=null&&n.hasOwnProperty("toAddress"))f.toAddress=y.bytes===String?S.base64.encode(n.toAddress,0,n.toAddress.length):y.bytes===Array?Array.prototype.slice.call(n.toAddress):n.toAddress;if(n.amount?.length){f.amount=[];for(let l=0;l<n.amount.length;++l)f.amount[l]=A.cosmos.base.v1beta1.Coin.toObject(n.amount[l],y)}return f},T.prototype.toJSON=function u(){return this.constructor.toObject(this,C.util.toJSONOptions)},T})(),x})();A.cosmos=(()=>{const x={};return x.base=(()=>{const T={};return T.v1beta1=(()=>{const u={};return u.Coin=(()=>{function n(y){if(y){for(let f=Object.keys(y),l=0;l<f.length;++l)if(y[f[l]]!=null)this[f[l]]=y[f[l]]}}return n.prototype.denom="",n.prototype.amount="",n.create=function y(f){return new n(f)},n.encode=function y(f,l){if(!l)l=K.create();if(f.denom!=null&&Object.hasOwnProperty.call(f,"denom"))l.uint32(10).string(f.denom);if(f.amount!=null&&Object.hasOwnProperty.call(f,"amount"))l.uint32(18).string(f.amount);return l},n.encodeDelimited=function y(f,l){return this.encode(f,l).ldelim()},n.decode=function y(f,l){if(!(f instanceof M))f=M.create(f);const h=l===void 0?f.len:f.pos+l,O=new A.cosmos.base.v1beta1.Coin;while(f.pos<h){const F=f.uint32();switch(F>>>3){case 1:O.denom=f.string();break;case 2:O.amount=f.string();break;default:f.skipType(F&7);break}}return O},n.decodeDelimited=function y(f){if(!(f instanceof M))f=new M(f);return this.decode(f,f.uint32())},n.verify=function y(f){if(typeof f!=="object"||f===null)return"object expected";if(f.denom!=null&&f.hasOwnProperty("denom")){if(!S.isString(f.denom))return"denom: string expected"}if(f.amount!=null&&f.hasOwnProperty("amount")){if(!S.isString(f.amount))return"amount: string expected"}return null},n.fromObject=function y(f){if(f instanceof A.cosmos.base.v1beta1.Coin)return f;const l=new A.cosmos.base.v1beta1.Coin;if(f.denom!=null)l.denom=String(f.denom);if(f.amount!=null)l.amount=String(f.amount);return l},n.toObject=function y(f,l){if(!l)l={};const h={};if(l.defaults)h.denom="",h.amount="";if(f.denom!=null&&f.hasOwnProperty("denom"))h.denom=f.denom;if(f.amount!=null&&f.hasOwnProperty("amount"))h.amount=f.amount;return h},n.prototype.toJSON=function y(){return this.constructor.toObject(this,C.util.toJSONOptions)},n})(),u.DecCoin=(()=>{function n(y){if(y){for(let f=Object.keys(y),l=0;l<f.length;++l)if(y[f[l]]!=null)this[f[l]]=y[f[l]]}}return n.prototype.denom="",n.prototype.amount="",n.create=function y(f){return new n(f)},n.encode=function y(f,l){if(!l)l=K.create();if(f.denom!=null&&Object.hasOwnProperty.call(f,"denom"))l.uint32(10).string(f.denom);if(f.amount!=null&&Object.hasOwnProperty.call(f,"amount"))l.uint32(18).string(f.amount);return l},n.encodeDelimited=function y(f,l){return this.encode(f,l).ldelim()},n.decode=function y(f,l){if(!(f instanceof M))f=M.create(f);const h=l===void 0?f.len:f.pos+l,O=new A.cosmos.base.v1beta1.DecCoin;while(f.pos<h){const F=f.uint32();switch(F>>>3){case 1:O.denom=f.string();break;case 2:O.amount=f.string();break;default:f.skipType(F&7);break}}return O},n.decodeDelimited=function y(f){if(!(f instanceof M))f=new M(f);return this.decode(f,f.uint32())},n.verify=function y(f){if(typeof f!=="object"||f===null)return"object expected";if(f.denom!=null&&f.hasOwnProperty("denom")){if(!S.isString(f.denom))return"denom: string expected"}if(f.amount!=null&&f.hasOwnProperty("amount")){if(!S.isString(f.amount))return"amount: string expected"}return null},n.fromObject=function y(f){if(f instanceof A.cosmos.base.v1beta1.DecCoin)return f;const l=new A.cosmos.base.v1beta1.DecCoin;if(f.denom!=null)l.denom=String(f.denom);if(f.amount!=null)l.amount=String(f.amount);return l},n.toObject=function y(f,l){if(!l)l={};const h={};if(l.defaults)h.denom="",h.amount="";if(f.denom!=null&&f.hasOwnProperty("denom"))h.denom=f.denom;if(f.amount!=null&&f.hasOwnProperty("amount"))h.amount=f.amount;return h},n.prototype.toJSON=function y(){return this.constructor.toObject(this,C.util.toJSONOptions)},n})(),u.IntProto=(()=>{function n(y){if(y){for(let f=Object.keys(y),l=0;l<f.length;++l)if(y[f[l]]!=null)this[f[l]]=y[f[l]]}}return n.prototype.int="",n.create=function y(f){return new n(f)},n.encode=function y(f,l){if(!l)l=K.create();if(f.int!=null&&Object.hasOwnProperty.call(f,"int"))l.uint32(10).string(f.int);return l},n.encodeDelimited=function y(f,l){return this.encode(f,l).ldelim()},n.decode=function y(f,l){if(!(f instanceof M))f=M.create(f);const h=l===void 0?f.len:f.pos+l,O=new A.cosmos.base.v1beta1.IntProto;while(f.pos<h){const F=f.uint32();switch(F>>>3){case 1:O.int=f.string();break;default:f.skipType(F&7);break}}return O},n.decodeDelimited=function y(f){if(!(f instanceof M))f=new M(f);return this.decode(f,f.uint32())},n.verify=function y(f){if(typeof f!=="object"||f===null)return"object expected";if(f.int!=null&&f.hasOwnProperty("int")){if(!S.isString(f.int))return"int: string expected"}return null},n.fromObject=function y(f){if(f instanceof A.cosmos.base.v1beta1.IntProto)return f;const l=new A.cosmos.base.v1beta1.IntProto;if(f.int!=null)l.int=String(f.int);return l},n.toObject=function y(f,l){if(!l)l={};const h={};if(l.defaults)h.int="";if(f.int!=null&&f.hasOwnProperty("int"))h.int=f.int;return h},n.prototype.toJSON=function y(){return this.constructor.toObject(this,C.util.toJSONOptions)},n})(),u.DecProto=(()=>{function n(y){if(y){for(let f=Object.keys(y),l=0;l<f.length;++l)if(y[f[l]]!=null)this[f[l]]=y[f[l]]}}return n.prototype.dec="",n.create=function y(f){return new n(f)},n.encode=function y(f,l){if(!l)l=K.create();if(f.dec!=null&&Object.hasOwnProperty.call(f,"dec"))l.uint32(10).string(f.dec);return l},n.encodeDelimited=function y(f,l){return this.encode(f,l).ldelim()},n.decode=function y(f,l){if(!(f instanceof M))f=M.create(f);const h=l===void 0?f.len:f.pos+l,O=new A.cosmos.base.v1beta1.DecProto;while(f.pos<h){const F=f.uint32();switch(F>>>3){case 1:O.dec=f.string();break;default:f.skipType(F&7);break}}return O},n.decodeDelimited=function y(f){if(!(f instanceof M))f=new M(f);return this.decode(f,f.uint32())},n.verify=function y(f){if(typeof f!=="object"||f===null)return"object expected";if(f.dec!=null&&f.hasOwnProperty("dec")){if(!S.isString(f.dec))return"dec: string expected"}return null},n.fromObject=function y(f){if(f instanceof A.cosmos.base.v1beta1.DecProto)return f;const l=new A.cosmos.base.v1beta1.DecProto;if(f.dec!=null)l.dec=String(f.dec);return l},n.toObject=function y(f,l){if(!l)l={};const h={};if(l.defaults)h.dec="";if(f.dec!=null&&f.hasOwnProperty("dec"))h.dec=f.dec;return h},n.prototype.toJSON=function y(){return this.constructor.toObject(this,C.util.toJSONOptions)},n})(),u})(),T})(),x})();var s=A;var V=()=>{return new dn([...mn,["/types.MsgSend",{...s.types.MsgSend}],["/types.MsgDeposit",{...s.types.MsgDeposit}]])},Y=(x)=>{return new jn({"/types.MsgSend":{aminoType:`${x===Bn.Maya?"mayachain":"thorchain"}/MsgSend`,toAmino:(T)=>({from_address:Z(T.fromAddress),to_address:Z(T.toAddress),amount:[...T.amount]}),fromAmino:(T)=>({fromAddress:Q(T.from_address),toAddress:Q(T.to_address),amount:[...T.amount]})},"/types.MsgDeposit":{aminoType:`${x===Bn.Maya?"mayachain":"thorchain"}/MsgDeposit`,toAmino:(T)=>({signer:Z(T.signer),memo:T.memo,coins:[...T.coins]}),fromAmino:(T)=>({signer:Q(T.signer),memo:T.memo,coins:[...T.coins]})}})};var D=(x)=>{switch(x){case E.Maya:return{amount:[],gas:"10000000000"};default:return{amount:[],gas:"500000000"}}},mf=D(E.THORChain).gas,gf=D(E.Maya).gas,rn=({from:x,recipient:T,assetValue:u,chain:n})=>({type:`${n===E.Maya?"mayachain":"thorchain"}/MsgSend`,value:{from_address:x,to_address:T,amount:[{amount:u.getBaseValue("string"),denom:w(u.symbol,!0)}]}}),sn=({from:x,assetValue:T,memo:u="",chain:n})=>{return{type:`${n===E.Maya?"mayachain":"thorchain"}/MsgDeposit`,value:{coins:[{amount:T.getBaseValue("string"),asset:en(T)}],signer:x,memo:u}}},$=({from:x,recipient:T,assetValue:u,memo:n,chain:y})=>{return!T?sn({from:x,assetValue:u,memo:n,chain:y}):rn({from:x,recipient:T,assetValue:u,chain:y})},o=(x,T)=>{return Y(T).fromAmino(x)},Un=async({from:x,recipient:T,assetValue:u,memo:n="",isStagenet:y=!1,chain:f})=>{const h=await(await G(y?Cn.THORChainStagenet:Cn.THORChain)).getAccount(x);if(!h)throw new Error("Account does not exist");const O=$({from:x,recipient:T,assetValue:u,memo:n,chain:f});return{chainId:an[f],accountNumber:h.accountNumber,sequence:h.sequence,msgs:[O],fee:D(u.chain),memo:n}},b=(x)=>{if(x.type==="thorchain/MsgSend"||x.type==="mayachain/MsgSend")return x;return{...x,value:{...x.value,coins:x.value.coins.map((T)=>{const u=gn.from({asset:T.asset}),n=(u.isSynthetic?u.symbol.split("/")?.[1]:u.symbol)?.toUpperCase(),y=(u.isSynthetic?u.symbol.split("/")?.[0]:u.chain)?.toUpperCase();return{...T,asset:{chain:y,symbol:n,ticker:n,synth:u.isSynthetic}}})}}},e=({chain:x,memo:T,msgs:u})=>{const n=V(),y=Y(x),f={typeUrl:"/cosmos.tx.v1beta1.TxBody",value:{memo:T,messages:u.map((l)=>y.fromAmino(l))}};return n.encode(f)},en=({symbol:x,chain:T})=>{if(T===E.Maya)return(x.toUpperCase()!=="CACAO"?x:`${E.Maya}.${x}`).toUpperCase();return(x.toUpperCase()!=="RUNE"?x:`${E.THORChain}.${x}`).toUpperCase()};import{Bip39 as Tf,EnglishMnemonic as uf,Slip10 as lf,Slip10Curve as xf,stringToPath as Kn}from"@cosmjs/crypto";import{DirectSecp256k1HdWallet as Af,DirectSecp256k1Wallet as hf}from"@cosmjs/proto-signing";import{SwapKitApi as Pn}from"@swapkit/api";import{AssetValue as _,Chain as B,ChainId as J}from"@swapkit/helpers";import{Secp256k1HdWallet as nf}from"@cosmjs/amino";import{base64 as ff,bech32 as nn}from"@scure/base";import{SwapKitError as cn}from"@swapkit/helpers";import{stringToPath as yf}from"@cosmjs/crypto";class P{server;chainId;prefix="";rpcUrl;constructor({server:x,chainId:T,prefix:u="cosmos",stagenet:n=!1}){this.rpcUrl=p(T,n),this.server=x,this.chainId=T,this.prefix=u}getAddressFromMnemonic=async(x,T)=>{return(await this.#n(x,T)).address};getPubKeyFromMnemonic=async(x,T)=>{const u=await this.#n(x,T);return ff.encode(u.pubkey)};checkAddress=(x)=>{if(!x.startsWith(this.prefix))return!1;try{const{prefix:T,words:u}=nn.decode(x);return nn.encode(T,u)===x.toLocaleLowerCase()}catch(T){return!1}};getBalance=async(x)=>{return(await(await G(this.rpcUrl)).getAllBalances(x)).map((n)=>({...n,denom:n.denom.includes("/")?n.denom.toUpperCase():n.denom}))};getAccount=async(x)=>{return(await G(this.rpcUrl)).getAccount(x)};transfer=async({from:x,recipient:T,assetValue:u,memo:n="",fee:y=On,signer:f})=>{if(!f)throw new cn("toolbox_cosmos_signer_not_defined");return(await(await t(this.rpcUrl,f)).sendTokens(x,T,[{denom:w(`u${u.symbol}`).toLowerCase(),amount:u.getBaseValue("string")}],y,n)).transactionHash};#f=(x,T)=>{return nf.fromMnemonic(x,{prefix:this.prefix,hdPaths:[yf(T)]})};#n=async(x,T)=>{const n=await(await this.#f(x,T)).getAccounts();if(n.length===0)throw new cn("toolbox_cosmos_no_accounts_found");return n[0]}}var i=async(x,T)=>{try{return(await Pn.getGasRates()).find((n)=>n.chainId===x)?.gas||T}catch(u){return console.error(u),T}},fn=(x,T)=>{switch(x){case"rune":return _.from({chain:B.THORChain,value:Number.parseInt(T)/1e8});case"uatom":case"atom":return _.from({chain:B.Cosmos,value:Number.parseInt(T)/1e6});case"cacao":return _.from({chain:B.Maya,value:Number.parseInt(T)/10000000000});case"maya":return _.from({asset:`${B.Maya}.${B.Maya}`,value:Number.parseInt(T)/1e4});case"ukuji":case"kuji":return _.from({chain:B.Kujira,value:Number.parseInt(T)/1e6});case W:return _.from({asset:`${B.Kujira}.USK`,value:Number.parseInt(T)/1e6});default:return _.from({asset:x,value:Number.parseInt(T)/1e8})}},R=({derivationPath:x,client:T})=>({transfer:T.transfer,getSigner:(u)=>{return Af.fromMnemonic(u,{prefix:T.prefix,hdPaths:[Kn(`${x}/0`)]})},getSignerFromPrivateKey:(u)=>{return hf.fromKey(u,T.prefix)},createPrivateKeyFromPhrase:async(u)=>{const n=Kn(`${x}/0`),y=new uf(u),f=await Tf.mnemonicToSeed(y),{privkey:l}=lf.derivePath(xf.Secp256k1,f,n);return l},getAccount:T.getAccount,validateAddress:T.checkAddress,getAddressFromMnemonic:(u)=>T.getAddressFromMnemonic(u,`${x}/0`),getPubKeyFromMnemonic:(u)=>T.getPubKeyFromMnemonic(u,`${x}/0`),getFeeRateFromThorswap:i,getBalance:async(u,n)=>{const y=await T.getBalance(u);return await Promise.all(y.filter(({denom:f})=>f&&!f.includes("IBC/")).map(({denom:f,amount:l})=>fn(f,l)))}}),Uy=({address:x,chain:T,stagenet:u=!1,server:n})=>{switch(T){case B.Cosmos:return new P({server:n||"https://node-router.thorswap.net/cosmos/rest",chainId:J.Cosmos}).checkAddress(x);case B.Kujira:return new P({server:n||"https://lcd-kujira.synergynodes.com/",chainId:J.Kujira,prefix:"kujira"}).checkAddress(x);case B.THORChain:return new P({server:u?"https://stagenet-thornode.ninerealms.com":"https://thornode.thorswap.net",chainId:u?J.THORChainStagenet:J.THORChain,prefix:`${u?"s":""}thor`,stagenet:u}).checkAddress(x);case B.Maya:return new P({server:u?"https://stagenet.mayanode.mayachain.info":"https://mayanode.mayachain.info",chainId:u?J.MayaStagenet:J.Maya,prefix:`${u?"s":""}maya`,stagenet:u}).checkAddress(x)}return!1},cy=({assetValue:x})=>{switch(x.chain){case B.Cosmos:return _.from({chain:B.Cosmos,value:0.007});case B.Kujira:return _.from({chain:B.Kujira,value:0.02});case B.THORChain:return _.from({chain:B.THORChain,value:0.02});case B.Maya:return _.from({chain:B.Maya,value:0.02});default:return x.set(0)}};import{BaseDecimal as d,ChainId as _n,DerivationPath as Sf,SwapKitNumber as yn}from"@swapkit/helpers";var Hn=({server:x}={})=>{const T=new P({server:x||"https://node-router.thorswap.net/cosmos/rest",chainId:_n.Cosmos}),u=R({decimal:d.GAIA,derivationPath:Sf.GAIA,client:T});async function n(){const f=await i(_n.Cosmos,500);return{type:"base",average:yn.fromBigInt(BigInt(f),d.GAIA),fast:yn.fromBigInt(BigInt(f)*15n/10n,d.GAIA),fastest:yn.fromBigInt(BigInt(f)*2n,d.GAIA)}}async function y(f){const l=await n();return u.transfer({...f,fee:f.fee||{amount:[{denom:"uatom",amount:l[f.feeOptionKey||"fast"].getBaseValue("string")||"1000"}],gas:"200000"}})}return{...u,getFees:n,transfer:y}};import{Chain as g}from"@swapkit/helpers";import{BaseDecimal as j,ChainId as En,DerivationPath as Mf,SwapKitNumber as Tn}from"@swapkit/helpers";async function In(){const x=await i(En.Kujira,1000);return{type:"base",average:Tn.fromBigInt(BigInt(x),j.KUJI),fast:Tn.fromBigInt(BigInt(Math.floor(x*1.5)),j.KUJI),fastest:Tn.fromBigInt(BigInt(Math.floor(x*2)),j.KUJI)}}var vn=({server:x}={})=>{const T=new P({server:x||"https://lcd-kujira.synergynodes.com/",chainId:En.Kujira,prefix:"kujira"}),u=R({decimal:j.KUJI,derivationPath:Mf.KUJI,client:T});return{...u,getFees:In,getBalance:async(n,y)=>{const f=await T.getBalance(n);return await Promise.all(f.filter(({denom:l})=>{if(!l||l.includes("IBC/"))return!1;return[W,r].includes(l)||!l.startsWith("FACTORY")}).map(({denom:l,amount:h})=>fn(l,h)))},transfer:async(n)=>{const y=await In();return u.transfer({...n,fee:n.fee||{amount:[{denom:"ukuji",amount:y[n.feeOptionKey||"fast"].getBaseValue("string")||"1000"}],gas:"200000"}})}}};import{Secp256k1HdWallet as Of,createMultisigThresholdPubkey as Ff,encodeSecp256k1Pubkey as Vn,pubkeyToAddress as Yn}from"@cosmjs/amino";import{Secp256k1 as Jn,Secp256k1Signature as Bf,stringToPath as Cf}from"@cosmjs/crypto";import{makeMultisignedTxBytes as Uf}from"@cosmjs/stargate";import{base64 as I}from"@scure/base";import{BaseDecimal as Nn,Chain as m,ChainId as Ln,DerivationPath as cf,FeeOption as un,RequestClient as Kf,SwapKitError as Pf,SwapKitNumber as Gn}from"@swapkit/helpers";function Gf(x){return async function T({signature:u,message:n,address:y}){const f=await x(y);if(!f?.pubkey)throw new Pf("toolbox_cosmos_verify_signature_no_pubkey");const l=Bf.fromFixedLength(I.decode(u));return Jn.verifySignature(l,I.decode(n),f.pubkey.value)}}var _f=({prefix:x,derivationPath:T})=>(u,n=0)=>{return Of.fromMnemonic(u,{hdPaths:[Cf(`${T}/${n}`)],prefix:x})},Hf=(x)=>I.encode(x),If=async(x,T,u)=>{const{msgs:n,accountNumber:y,sequence:f,chainId:l,fee:h,memo:O}=JSON.parse(T),F=(await x.getAccounts())?.[0]?.address||"",q=await Y(u),v=await V(),X=await Fn(x,{registry:v,aminoTypes:q}),N=[];for(let c of n){const H=await o(c,u);N.push(H)}const{signatures:[z]}=await X.sign(F,N,h,O,{accountNumber:y,sequence:f,chainId:l}),U=await e({chain:u,msgs:n.map((c)=>b(c)),memo:O});return{signature:Hf(z),bodyBytes:U}},Ef=({prefix:x,rpcUrl:T})=>async(u,n,y,f,l)=>{const{sequence:h,fee:O}=JSON.parse(u),F=await Rn(y,f),q=n.map((N)=>[Yn(Vn(I.decode(N.pubKey)),x),I.decode(N.signature)]),v=await G(T),{transactionHash:X}=await v.broadcastTx(Uf(F,h,O,l,new Map(q)));return X},Rn=async(x,T,u=!0)=>{return Ff(x.map((n)=>Vn(I.decode(n))),T,u)},vf=(x)=>I.decode(x),Nf=(x)=>(T)=>{return Yn(T,x)},Lf=async({privateKey:x,message:T})=>{const u=await Jn.createSignature(I.decode(T),x);return I.encode(Buffer.concat([u.r(32),u.s(32)]))},qn=({chain:x,stagenet:T})=>{const u=x===m.THORChain,n=x===m.Maya,y=u?Ln.THORChain:Ln.Maya,f=`${T?"s":""}${x.toLowerCase()}`,l=cf[x],h=p(y,T),O=T?n?"https://stagenet.mayanode.mayachain.info":"https://stagenet-thornode.ninerealms.com":n?"https://mayanode.mayachain.info":"https://thornode.thorswap.net",F=new P({server:O,chainId:y,prefix:f,stagenet:T}),q=D(x),v=R({client:F,derivationPath:l,decimal:Nn[x]}),X=async(U)=>{try{return await v.getBalance(U)}catch(c){return Promise.reject(c)}},N=async()=>{let U;const c=`${O}/${u?"thorchain":"mayachain"}/constants}`;try{const{int_64_values:{NativeTransactionFee:H}}=await Kf.get(c);if(!H||Number.isNaN(H)||H<0)throw Error(`Invalid nativeFee: ${H.toString()}`);U=new Gn(H)}catch{U=new Gn({value:u?0.02:1,decimal:Nn[x]})}return{[un.Average]:U,[un.Fast]:U,[un.Fastest]:U}},z=async({from:U,recipient:c,assetValue:H,memo:ln="",signer:xn})=>{if(!xn)throw new Error("Signer not defined");const Dn=V(),zn=await t(h,xn,{registry:Dn}),Qn=o(b($({assetValue:H,from:U,recipient:c,memo:ln,chain:x})),x);return(await zn.signAndBroadcast(U,[Qn],q,ln)).transactionHash};return{...v,deposit:(U)=>z(U),transfer:z,getFees:N,buildAminoMsg:$,convertToSignable:o,buildTransaction:Un,buildEncodedTxBody:e,prepareMessageForBroadcast:b,createDefaultAminoTypes:()=>Y(x),createDefaultRegistry:V,secp256k1HdWalletFromMnemonic:_f({derivationPath:l,prefix:f}),signMultisigTx:(U,c)=>If(U,c,x),broadcastMultisigTx:Ef({prefix:f,rpcUrl:h}),createMultisig:Rn,importSignature:vf,loadAddressBalances:X,pubkeyToAddress:Nf(f),signWithPrivateKey:Lf,verifySignature:Gf(v.getAccount)}},Xn=({stagenet:x}={})=>{return qn({chain:m.THORChain,stagenet:x})},Wn=({stagenet:x}={})=>{return qn({chain:m.Maya,stagenet:x})};var ty=(x)=>{switch(x){case g.Kujira:return vn;case g.Maya:return Wn;case g.THORChain:return Xn;case g.Cosmos:return Hn;default:throw new Error(`Chain ${x} is not supported`)}};export{rn as transferMsgAmino,qf as toBase64,b as prepareMessageForBroadcast,ty as getToolboxByChain,p as getRPC,i as getFeeRateFromThorswap,en as getDenomWithChain,w as getDenom,D as getDefaultChainFee,fn as getAssetFromDenom,Xf as fromBase64,cy as estimateTransactionFee,Qf as estimateMaxSendableAmount,sn as depositMsgAmino,G as createStargateClient,t as createSigningStargateClient,Fn as createOfflineStargateClient,V as createDefaultRegistry,Y as createDefaultAminoTypes,Uy as cosmosValidateAddress,o as convertToSignable,Un as buildTransaction,e as buildEncodedTxBody,$ as buildAminoMsg,Q as bech32ToBase64,Z as base64ToBech32,r as YUM_KUJIRA_FACTORY_DENOM,W as USK_KUJIRA_FACTORY_DENOM,Xn as ThorchainToolbox,mf as THORCHAIN_GAS_VALUE,Wn as MayaToolbox,gf as MAYA_GAS_VALUE,vn as KujiraToolbox,Hn as GaiaToolbox,On as DEFAULT_COSMOS_FEE_MAINNET,qn as BaseThorchainToolbox,R as BaseCosmosToolbox};

//# debugId=E8736A2CC407A98A64756E2164756E21
